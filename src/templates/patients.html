<h1>Patients List</h1>

<form method="get" action="{{ url_for('list_patients') }}">
    <input type="text" name="search" placeholder="Search by name or phone" value="{{ search }}">
    <button type="submit">Search</button>
</form>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Patient ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Date of Birth</th>
                <th>Gender</th>
                <th>Blood Type</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Address</th>
                <th>Emergency Contact Name</th>
                <th>Emergency Contact Phone</th>
                <th>Insurance Provider</th>
                <th>Insurance Number</th>
                <th>Allergies</th>
                <th>Drug Interactions</th>
                <th>Past Medical History</th>
                <th>Surgical History</th>
                <th>Family Medical History</th>
                <th>Social History</th>
                <th>Immunizations</th>
                <th>Hospital Stays</th>
                <th>Next Appointment</th>
                <th>Primary Physician</th>
                <th>Incident History</th>
            </tr>
        </thead>
        <tbody>
            {% for patient in patients.items %}
            <tr>
                <td>{{ patient.id }}</td>
                <td>{{ patient.first_name }}</td>
                <td>{{ patient.last_name }}</td>
                <td>{{ patient.date_of_birth }}</td>
                <td>{{ patient.gender }}</td>
                <td>{{ patient.blood_type }}</td>
                <td>{{ patient.phone }}</td>
                <td>{{ patient.email }}</td>
                <td>{{ patient.address }}</td>
                <td>{{ patient.emergency_contact_name }}</td>
                <td>{{ patient.emergency_contact_phone }}</td>
                <td>{{ patient.insurance_provider }}</td>
                <td>{{ patient.insurance_number }}</td>
                <td>{{ patient.allergies }}</td>
                <td>{{ patient.drug_interactions }}</td>
                <td>{{ patient.past_medical_history }}</td>
                <td>{{ patient.surgical_history }}</td>
                <td>{{ patient.family_medical_history }}</td>
                <td>{{ patient.social_history }}</td>
                <td>{{ patient.immunizations }}</td>
                <td>{{ patient.hospital_stays }}</td>
                <td>{{ patient.next_appointment }}</td>
                <td>{{ patient.primary_physician }}</td>
                <td>{{ patient.incident_history }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination controls -->
<div class="pagination">
    {% if patients.has_prev %}
        <a href="{{ url_for('list_patients', page=patients.prev_num, search=search) }}">« Prev</a>
    {% endif %}

    Page {{ patients.page }} of {{ patients.pages }}

    {% if patients.has_next %}
        <a href="{{ url_for('list_patients', page=patients.next_num, search=search) }}">Next »</a>
    {% endif %}
</div>
